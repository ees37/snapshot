var servo = require('servo-control/servo-control.js');

var TIME_TO_MOVE = 2000;

module.exports = {
  snapImage: function(callback)
  {
    console.log("snapping image");
    // return both motors to the home position
    servo.returnHome(servo.motorHorizontal_, function() {

    });
    servo.returnHome(servo.motorVertical_, function() {

    });

    // assume both motors are in the home position
    var posHor = servo.motorVertical_.HOME;
    var posVer = servo.motorHorizontal_.HOME;
    // schedule all of the movements
    for (i = 0; i < servo.TOTAL_DEGREES / servo.motorHorizontal_.DEG_PER_IMG; ++i) {
      setTimeout(function() {
        servo.moveMotor(servo.motorHorizontal_, posHor += servo.motorHorizontal_.DEG_PER_IMG * servo.ONE_DEGREE,
           function() {

        });
      }, i * TIME_TO_MOVE);
    }
  }
}
